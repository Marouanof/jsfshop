<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>
    <h:head>
        <title>Détail Produit - E-Commerce</title>
    </h:head>
    <h:body>
        <ui:composition template="/template.xhtml">
            <ui:define name="content">
                <div class="product-detail">
                    <h:form id="detailForm">
                        <p:panel>
                            <p:grid columns="2" style="width: 100%;">
                                <p:column>
                                    <p:graphicImage value="/images/product-#{param.id}.jpg"
                                                    style="width: 100%; max-width: 400px;" />
                                </p:column>

                                <p:column>
                                    <h2>#{productBean.selectedProduct.nom}</h2>
                                    <p>#{productBean.selectedProduct.description}</p>
                                    <h3 style="color: #2E8B57;">#{productBean.selectedProduct.prix} €</h3>
                                    <p>Stock: #{productBean.selectedProduct.stock}</p>

                                    <div style="margin-top: 20px;">
                                        <p:spinner value="1" min="1" max="#{productBean.selectedProduct.stock}"
                                                   size="3" style="width: 80px; margin-right: 10px;" />
                                        <p:commandButton value="Ajouter au panier" icon="pi pi-cart-plus"
                                                         action="#{cartBean.addToCart(productBean.selectedProduct.id, 1)}"
                                                         rendered="#{userBean.currentUser != null}"
                                                         update="growl" />
                                    </div>
                                </p:column>
                            </p:grid>
                        </p:panel>
                    </h:form>
                </div>

                <f:event type="preRenderView" listener="#{productBean.loadProduct(param.id)}" />
            </ui:define>
        </ui:composition>
    </h:body>
</f:view>
</html>